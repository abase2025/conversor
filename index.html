
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Conversor TXT para PDF</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-light">

  <div class="container py-5">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="card-title mb-4 text-center text-primary">Conversor de Arquivo TXT para PDF</h2>

        <div class="mb-3">
          <label for="txtFile" class="form-label">Selecione o arquivo .txt:</label>
          <input class="form-control" type="file" id="txtFile" accept=".txt">
        </div>

        <div class="text-center">
          <button class="btn btn-success" onclick="converterParaPDF()">Converter e Baixar PDF</button>
        </div>

        <div id="mensagem" class="mt-4 text-center text-muted"></div>
      </div>
    </div>
  </div>

  <script>
    async function converterParaPDF() {
      const fileInput = document.getElementById('txtFile');
      const file = fileInput.files[0];
      const mensagem = document.getElementById('mensagem');

      if (!file) {
        mensagem.innerText = '⚠️ Por favor, selecione um arquivo .txt.';
        return;
      }

      const reader = new FileReader();
      reader.onload = async function(e) {
        const conteudo = e.target.result;

        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF();

        const linhas = conteudo.split('\n');
        let y = 10;

        linhas.forEach((linha) => {
          if (y > 280) {
            pdf.addPage();
            y = 10;
          }
          pdf.text(linha, 10, y);
          y += 10;
        });

        const nomeArquivo = file.name.replace('.txt', '') + '.pdf';
        pdf.save(nomeArquivo);
        mensagem.innerText = '✅ Arquivo PDF gerado com sucesso!';
      };

      reader.readAsText(file);
    }
  </script>

</body>
</html>
